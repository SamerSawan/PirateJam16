[gd_resource type="BehaviorTree" load_steps=17 format=3 uid="uid://b6k06ponlse1f"]

[ext_resource type="Script" path="res://ai/tasks/ArriveAtNavTargetPos.gd" id="2_ypbhp"]
[ext_resource type="Script" path="res://ai/tasks/GetClosestTarget.gd" id="4_qgagq"]
[ext_resource type="Script" path="res://ai/tasks/RunFromClosestTarget.gd" id="5_4lh7q"]

[sub_resource type="BlackboardPlan" id="BlackboardPlan_f5t40"]
var/var/name = &"var"
var/var/type = 3
var/var/value = 0.0
var/var/hint = 0
var/var/hint_string = ""

[sub_resource type="BTAction" id="BTAction_0oprm"]
script = ExtResource("4_qgagq")
bb_closest_target = &"closest_target"

[sub_resource type="BTAction" id="BTAction_bcpt6"]
script = ExtResource("5_4lh7q")
bb_closest_target_node = &"target_node"
flee_distance_max = 256.0
flee_distance_min = 128.0
target_direction_modifier_min = -30.0
target_direction_modifier_max = 30.0

[sub_resource type="BBNode" id="BBNode_txafw"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_dwx1e"]
animation_player = SubResource("BBNode_txafw")
animation_name = &"RunAway"

[sub_resource type="BTAction" id="BTAction_j0s1s"]
script = ExtResource("2_ypbhp")
speed_modifier = 1.0

[sub_resource type="BTTimeLimit" id="BTTimeLimit_7pevl"]
children = [SubResource("BTAction_j0s1s")]

[sub_resource type="BTSequence" id="BTSequence_lfbks"]
custom_name = "Run Away"
children = [SubResource("BTAction_0oprm"), SubResource("BTAction_bcpt6"), SubResource("BTPlayAnimation_dwx1e"), SubResource("BTTimeLimit_7pevl")]

[sub_resource type="BTCooldown" id="BTCooldown_l5j11"]
duration = 0.1
children = [SubResource("BTSequence_lfbks")]

[sub_resource type="BBNode" id="BBNode_hmjlh"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_tygkv"]
animation_player = SubResource("BBNode_hmjlh")
animation_name = &"Cower"

[sub_resource type="BTSequence" id="BTSequence_e7n3y"]
custom_name = "Idle"
children = [SubResource("BTPlayAnimation_tygkv")]

[sub_resource type="BTSelector" id="BTSelector_qe5up"]
children = [SubResource("BTCooldown_l5j11"), SubResource("BTSequence_e7n3y")]

[resource]
blackboard_plan = SubResource("BlackboardPlan_f5t40")
root_task = SubResource("BTSelector_qe5up")
